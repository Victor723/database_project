{% extends "base.html" %}

{% block content %}

<style>
    .login-container {
        max-width: 500px;
        margin: auto;
        padding-top: 50px;
    }

    .signup-link-container {
        margin-top: 30px;
        text-align: center;
        display: block;
    }

    .login-form {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, .05);
    }

    .login-form h1 {
        text-align: center;
        color: #333;
    }

    .login-form .form-control {
        border-radius: 20px;
        padding: 25px;
        font-size: 16px;
    }

    .login-form .form-group {
        margin-bottom: 15px;
    }

    .login-form .btn {
        width: 100%;
        border-radius: 20px;
        padding: 10px;
        font-size: 18px;
    }

    /* Adjust colors, hover effects, etc., as per the design */
    .login-form .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    .sign-up-link {
        text-align: center;
        display: block;
        margin-top: 20px;
    }



    /* Ensures the border color stays consistent during focus */
    .form-control:focus {
        border-color: #80bdff;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }

    .input-group .form-control {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }

    .input-group .form-control,
    .input-group .input-group-text {
        border-color: #ced4da;
        /* matching Bootstrap's default border color */
    }

    /* This will ensure that the input group's children are properly aligned */
    .input-group>.form-control,
    .input-group>.input-group-prepend>.input-group-text {
        display: flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
    }

    /* Adjust the size of the icon */
    .input-group-text .fas {
        font-size: 0.9rem;
        /* you can adjust the size as needed */
    }

    .input-group-text {
        background-color: #fff;
        /* Set the background color to white */
        border-top: 1px solid #ced4da;
        border-bottom: 1px solid #ced4da;
        border-left: 1px solid #ced4da;
        border-right: none;
        /* Remove the right border to visually connect the icon */
    }

    .form-control {
        border: 1px solid #ced4da;
        /* Ensure the input has a full border */
        border-radius: 20px;
        /* Rounded corners for the input field */
        /* border-left: none; */
        /* Remove the left border to visually connect to the icon */
    }

    /* Use this if .input-group-prepend is also being used */
    .input-group-prepend .input-group-text {
        border-right: none;
        /* Remove the right border */
    }

    .input-group-append {
        border-left: none;
        /* This ensures that no left border is applied to the append element */
    }

    /* Ensure the password field does not have a right border */
    .input-group .form-control.password {
        border-right: none !important;
    }

    /* Matching the input field border styles for the button */
    .toggle-password {
        border: 1px solid #ced4da;
        /* Match the border width and color */
        border-left: none;
        /* Remove the left border to make it seamless */
        border-radius: 0 20px 20px 0;
        /* Match the border radius (top-right and bottom-right corners) */
        outline: none;
        /* Removes the outline to prevent a focus ring */
        background: transparent;
        /* Ensures the button has no background color */
        padding: 0.375rem 0.75rem;
        /* Adjust padding to match the input field */
        cursor: pointer;
        /* Changes the mouse cursor to a pointer on hover */
    }

    /* Adjust the icon size and alignment if necessary */
    .toggle-password .fas {
        font-size: 1rem;
        /* Example size, adjust as needed */
        vertical-align: middle;
        /* Centers the icon vertically */
    }

    /* When the button is clicked or focused, ensure no additional borders appear */
    .toggle-password:focus,
    .toggle-password:active {
        box-shadow: none;
        /* Remove Bootstrap's default focus glow */
        position: relative;
        /* To prevent shifting when the border changes */
    }

    .sidebar {
        flex: 0 0 250px;
        height: 37vh;
        /* Fixed height */
        padding: 20px;
        background-color: #f5f5f5;
        overflow-y: auto;
        /* Scrollable */
    }

    .profile-page {
        display: flex;
        flex-direction: row;
        gap: 2rem;
        /* This adds spacing between the sidebar and the profile content */
    }

    .nav-link {
        padding: 10px;
        color: #333;
        text-decoration: none;
        display: block;
        margin: 5px 0;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    .nav-link:hover,
    .nav-link.active {
        background-color: #e7e7e7;
    }

    .btn-switch {
        display: block;
        width: 100%;
        padding: 10px;
        margin-top: 20px;
        background-color: #007bff;
        color: white;
        text-align: center;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .btn-switch:hover {
        background-color: #0056b3;
    }

    .profile-container {
        background-color: #fff;
        /* White background */
        border-radius: 8px;
        /* Rounded corners */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        /* A subtle shadow */
        padding: 20px;
        /* Space inside the box */
        margin: 20px;
        /* Space outside the box */
        flex-grow: 0.6;
    }
</style>

<div class="profile-page">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <nav class="nav flex-column">
            <a class="nav-link " href="{{ url_for('users.user_profile') }}">Dashboard</a>
            <a class="nav-link " href="{{ url_for('users.user_details') }}">Account Details</a>
            <a class="nav-link" href="{{ url_for('orders.show_orders') }}">Order History</a>
            <span class="nav-link disabled">Track Order</span>
            <a class="nav-link" href="{{ url_for('cart.shopping_cart') }}">Shopping Cart</a>
            <a class="nav-link" href="{{ url_for('users.user_address') }}">Address</a>
            <a class="nav-link" href="{{ url_for('myreview.get_myreview') }}">My Review</a>
            <a class="nav-link active" href="{{ url_for('users.user_balance') }}">Wallet</a>
        </nav>
        {% if is_seller %}
        <button type="button" class="btn-switch">Switch to seller</button>
        {% endif %}
    </aside>

    <div class="profile-container">
        <form method="post">
            {{ form.hidden_tag() }}
            <div class="account-settings mb-3">
                <h2 class="h3 mb-3 font-weight-normal">Edit your address</h2>
                <div class="form-group">
                    {{ form.companyname.label(class="form-label") }}
                    {{ form.companyname(class="form-control",
                    placeholder=current_user.companyname)
                    }}
                </div>
                <div class="form-group">
                    {{ form.streetaddress.label(class="form-label") }}
                    {{ form.streetaddress(class="form-control",
                    placeholder=current_user.streetaddress)
                    }}
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        {{ form.country.label(class="form-label") }}
                        <select class="form-control" id="{{ form.country.id }}" name="{{ form.country.name }}">
                            {% for code, name in form.country.choices %}
                                <option value="{{ code }}" {% if current_user.country == code %}selected{% endif %}>{{ name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group col-md-6">
                        {{ form.regionstate.label(class="form-label") }}
                        {{ form.regionstate(class="form-control", placeholder=current_user.stateregion) }}
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group col-md-6">
                        {{ form.city.label(class="form-label") }}
                        {{ form.city(class="form-control",
                        placeholder=current_user.city)
                        }}
                    </div>
                    <div class="form-group col-md-6">
                        {{ form.zipcode.label(class="form-label") }}
                        {{ form.zipcode(class="form-control",
                        placeholder=current_user.zipcode)
                        }}
                    </div>
                </div>
                <div class="form-group">
                    {{ form.phonenumber.label(class="form-label") }}
                    {{ form.phonenumber(class="form-control",
                    placeholder=current_user.phonenumber)
                    }}
                </div>
                <div class="text-right">
                    {{ form.submit(class="btn btn-primary") }}
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock %}
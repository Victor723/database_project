
CREATE TABLE ProductReview (
    pr_productkey BIGINT NOT NULL,
    pr_userkey BIGINT NOT NULL,
    pr_productname VARCHAR(255) NOT NULL,
    pr_orderkey BIGINT NOT NULL,
    pr_reviewdate DATE NOT NULL,
    pr_review TEXT NOT NULL,
    pr_rating DECIMAL(2,1) NOT NULL,
    PRIMARY KEY (pr_productkey, pr_userkey),
    FOREIGN KEY(pr_productkey) REFERENCES Product(p_productkey),
    FOREIGN KEY(pr_userkey) REFERENCES User(u_userkey)
);

CREATE TABLE SellerReview (
    sr_sellerkey BIGINT NOT NULL,
    sr_userkey BIGINT NOT NULL,
    sr_sellername VARCHAR(255) NOT NULL,
    sr_orderkey BIGINT NOT NULL,
    sr_reviewdate DATE NOT NULL,
    sr_review TEXT NOT NULL,
    sr_rating DECIMAL(2,1) NOT NULL,
    PRIMARY KEY (sr_sellerkey, sr_userkey),
    FOREIGN KEY(sr_sellerkey) REFERENCES Seller(s_sellerkey),
    FOREIGN KEY(sr_userkey) REFERENCES User(u_userkey)
);

CREATE TABLE Users (
    u_userkey BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    u_email VARCHAR(255) UNIQUE NOT NULL,
    u_firstname VARCHAR(255) NOT NULL,
    u_lastname VARCHAR(255) NOT NULL,
    u_password VARCHAR(255) NOT NULL,
    u_balance DECIMAL(10, 2) DEFAULT 0.00 CHECK (u_balance >= 0),
    u_companyname VARCHAR(255),
    u_streetaddress VARCHAR(255) NOT NULL,
    u_city VARCHAR(100) NOT NULL,
    u_stateregion VARCHAR(100),
    u_zipcode VARCHAR(20) NOT NULL,
    u_country VARCHAR(100) NOT NULL,
    u_phonenumber VARCHAR(20)
    PRIMARY KEY(u_userkey)
);

CREATE TABLE Seller (
    s_sellerkey BIGINT NOT NULL,
    s_userkey BIGINT NOT NULL,
    s_registrationdate DATE NOT NULL,
    PRIMARY KEY s_sellerkey,
    FOREIGN KEY (s_userkey) REFERENCES User(u_userkey)
);
